<!DOCTYPE html>
<html>
  <head>
    <title>View File</title>
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-100 dark:bg-gray-900 p-8">
    <div class="max-w-xl mx-auto bg-white dark:bg-gray-800 rounded shadow p-6">
      <div class="flex items-center justify-between gap-4 mt-4">
        <a
          href="/home"
          class="bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white px-2 py-1 rounded transition-colors"
        >
          <i class="ri-arrow-left-s-line text-2xl"></i>
        </a>
        <a
          href="/download/<%= file.path %>"
          class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition-colors"
          download="<%= file.originalname %>"
        >
          <i class="ri-download-line"></i
        ></a>
      </div>
      <div class="my-6">
        <% const publicUrl = `${process.env.SUPABASE_URL.replace('.co',
        '.co/storage/v1/object/public')}/drive-storage/${file.path}`; %> <% if
        (file.mimetype.startsWith('image/')) { %>
        <img
          src="<%= publicUrl %>"
          alt="<%= file.originalname %>"
          class="max-w-full rounded shadow border border-gray-200 dark:border-gray-700"
        />
        <% } else if (file.mimetype === 'application/pdf') { %>
        <iframe
          src="<%= publicUrl %>"
          width="100%"
          height="500px"
          class="rounded border border-gray-200 dark:border-gray-700"
        ></iframe>
        <% } else { %>
        <a
          href="<%= publicUrl %>"
          target="_blank"
          class="text-blue-600 dark:text-blue-400 underline hover:text-blue-800 dark:hover:text-blue-300 transition-colors"
          >Open File</a
        >
        <% } %>
      </div>
      <h1 class="text-2xl mb-2 font-bold text-gray-900 dark:text-white">
        <%= file.originalname %>
      </h1>
      <div class="flex flex-col gap-1">
        <p class="text-gray-700 dark:text-gray-300 truncate">
          Type: <%= file.mimetype %>
        </p>
        <p class="text-gray-700 dark:text-gray-300 truncate">
          Size: <%= file.size %> KB
        </p>
      </div>
    </div>
  </body>
</html>
